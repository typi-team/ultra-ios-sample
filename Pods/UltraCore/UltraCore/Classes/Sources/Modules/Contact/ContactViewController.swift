//
//  ContactViewController.swift
//  Pods
//
//  Created by Slam on 6/23/23.
//  Copyright (c) 2023 ___ORGANIZATIONNAME___. All rights reserved.
//
//  This file was generated by the üêç VIPER generator
//

import UIKit

final class ContactViewController: BaseViewController<ContactPresenter> {
    
    fileprivate lazy var imageView: UIImageView = .init({
        $0.borderWidth = 0
        $0.cornerRadius = 70
        $0.borderColor = .green500
    })
    
    fileprivate lazy var headline: HeadlineBody = .init({
        $0.text = "–ü—Ä–æ—Ñ–∏–ª—å"
        $0.font = .systemFont(ofSize: 20, weight: .bold)
        $0.numberOfLines = 0
    })
    
    fileprivate lazy var phoneNumber: RegularFootnote = .init()
    
    fileprivate lazy var contactTitleButton: TextButton = .init({
        $0.setImage(.named("contact_file_icon"), for: .normal)
    })
    
    fileprivate lazy var phoneButton: TextButton = .init({
        $0.setImage(.named("contact_phone_icon"), for: .normal)
        $0.setTitle("–¢–µ–ª–µ—Ñ–æ–Ω", for: .normal)
    })
    
    private let scrollView = UIScrollView({
        $0.alwaysBounceVertical = true
        $0.showsVerticalScrollIndicator = true
    })
    
    private let stackView = UIStackView({
        $0.spacing = 16
        $0.axis = .vertical
    })

    override func setupViews() {
        super.setupViews()

        self.title = "–û –∫–æ–Ω—Ç–∞–∫—Ç–µ"
        self.scrollView.addSubview(stackView)
        self.view.addSubview(scrollView)
        
        let stack = UIStackView{
            $0.distribution = .equalSpacing
            $0.addArrangedSubview(UIView())
            $0.addArrangedSubview(imageView)
            $0.addArrangedSubview(UIView())
        }
        self.stackView.addArrangedSubview(stack)
        self.stackView.setCustomSpacing(24, after: stack)
        self.stackView.addArrangedSubview(headline)
        self.stackView.setCustomSpacing(40, after: headline)
        self.stackView.addArrangedSubview(contactTitleButton)
        self.stackView.setCustomSpacing(24, after: contactTitleButton)
        self.stackView.addArrangedSubview(phoneButton)
        self.stackView.setCustomSpacing(4, after: phoneButton)
        self.stackView.addArrangedSubview(phoneNumber)
        
    }

    override func setupConstraints() {
        super.setupConstraints()

        self.scrollView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }

        self.stackView.snp.makeConstraints { make in
            make.leading.trailing.equalToSuperview().inset(16)
            make.top.bottom.equalToSuperview().inset(16)
            make.width.equalToSuperview().inset(16)
        }
        
        self.imageView.snp.makeConstraints { make in
            make.width.height.equalTo(140)
        }
    }
    
    override func setupInitialData() {
        super.setupInitialData()
        self.presenter?.viewDidLoad()
    }
}

// MARK: - Extensions -

extension ContactViewController: ContactViewInterface {
    func update(contact: ContactDisplayable) {
        self.imageView.config(contact: contact)
        self.phoneNumber.text = "           " + contact.phone
        self.contactTitleButton.setTitle(contact.displaName, for: .normal)
    }
}
